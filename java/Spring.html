<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Spring 5 | dsapr</title><meta name="description" content="Spring 5 学习笔记">
    <link rel="modulepreload" href="/blog-vuepress/assets/app.340c2b94.js"><link rel="modulepreload" href="/blog-vuepress/assets/Spring.html.707b8050.js"><link rel="modulepreload" href="/blog-vuepress/assets/Spring.html.e9f27f6b.js">
    <link rel="stylesheet" href="/blog-vuepress/assets/style.906154eb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog-vuepress/" class=""><img class="logo" src="/blog-vuepress/images/logo.png" alt="dsapr"><span class="site-name can-hide">dsapr</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog-vuepress/overview/" class="" aria-label="概览"><!--[--><!--]--> 概览 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/java/" class="router-link-active" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/arithmetic/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/network/" class="" aria-label="计算机网络"><!--[--><!--]--> 计算机网络 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/sql/" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/philosophy/" class="" aria-label="哲学"><!--[--><!--]--> 哲学 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/other/" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="站点"><span class="title">站点</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="站点"><span class="title">站点</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/dsapr" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://gitee.com/dsapr" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/git@github.com:dsapr/blog-vuepress.git" rel="noopener noreferrer" target="_blank" aria-label="博客仓库"><!--[--><!--]--> 博客仓库 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog-vuepress/overview/" class="" aria-label="概览"><!--[--><!--]--> 概览 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/java/" class="router-link-active" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/arithmetic/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/network/" class="" aria-label="计算机网络"><!--[--><!--]--> 计算机网络 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/sql/" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/philosophy/" class="" aria-label="哲学"><!--[--><!--]--> 哲学 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-vuepress/other/" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="站点"><span class="title">站点</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="站点"><span class="title">站点</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/dsapr" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://gitee.com/dsapr" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/git@github.com:dsapr/blog-vuepress.git" rel="noopener noreferrer" target="_blank" aria-label="博客仓库"><!--[--><!--]--> 博客仓库 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Spring 5 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第一章-引言" class="router-link-active router-link-exact-active sidebar-item" aria-label="第一章 引言"><!--[--><!--]--> 第一章 引言 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-ejb存在的问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. EJB存在的问题"><!--[--><!--]--> 1. EJB存在的问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-什么是-spring" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 什么是 Spring"><!--[--><!--]--> 2. 什么是 Spring <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-设计模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 设计模式"><!--[--><!--]--> 3. 设计模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_4-工厂设计模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 工厂设计模式"><!--[--><!--]--> 4. 工厂设计模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_5-总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 总结"><!--[--><!--]--> 5. 总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第二章、-第一个-spring-程序" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二章、 第一个 Spring 程序"><!--[--><!--]--> 第二章、 第一个 Spring 程序 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-软件版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 软件版本"><!--[--><!--]--> 1. 软件版本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-环境搭建" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 环境搭建"><!--[--><!--]--> 2. 环境搭建 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-spring-的核心-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Spring 的核心 API"><!--[--><!--]--> 3. Spring 的核心 API <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_4-程序开发" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 程序开发"><!--[--><!--]--> 4. 程序开发 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_5-细节分析" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 细节分析"><!--[--><!--]--> 5. 细节分析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_6-spring工厂的底层实现原理-简易版" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. Spring工厂的底层实现原理(简易版)"><!--[--><!--]--> 6. Spring工厂的底层实现原理(简易版) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_7-思考" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. 思考"><!--[--><!--]--> 7. 思考 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-什么是注入" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 什么是注入"><!--[--><!--]--> 1. 什么是注入 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-spring注入的原理分析-简易版" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. Spring注入的原理分析(简易版)"><!--[--><!--]--> 2. Spring注入的原理分析(简易版) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第五章、set注入详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="第五章、set注入详解"><!--[--><!--]--> 第五章、set注入详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-jdk内置类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. JDK内置类型"><!--[--><!--]--> 1. JDK内置类型 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-用户自定义类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 用户自定义类型"><!--[--><!--]--> 2. 用户自定义类型 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-1-第一种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 第一种方式"><!--[--><!--]--> 2.1 第一种方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-2-第二种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 第二种方式"><!--[--><!--]--> 2.2 第二种方式 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-set-注入的简化写法" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Set 注入的简化写法"><!--[--><!--]--> 3. Set 注入的简化写法 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-1-基于属性简化" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 基于属性简化"><!--[--><!--]--> 3.1 基于属性简化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-2-基于命名空间-p-进行简化" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 基于命名空间 p 进行简化"><!--[--><!--]--> 3.2 基于命名空间 p 进行简化 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第六章、构造注入" class="router-link-active router-link-exact-active sidebar-item" aria-label="第六章、构造注入"><!--[--><!--]--> 第六章、构造注入 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-开发步骤" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 开发步骤"><!--[--><!--]--> 1. 开发步骤 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-构造方法重载" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 构造方法重载"><!--[--><!--]--> 2. 构造方法重载 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-注入的总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 注入的总结"><!--[--><!--]--> 3. 注入的总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第七章、反转控制-与-依赖注入" class="router-link-active router-link-exact-active sidebar-item" aria-label="第七章、反转控制 与 依赖注入"><!--[--><!--]--> 第七章、反转控制 与 依赖注入 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-反转-转移-控制-ioc-inverse-of-control" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 反转(转移)控制(IOC Inverse of Control)"><!--[--><!--]--> 1. 反转(转移)控制(IOC Inverse of Control) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-依赖注入-dependency-injection-di" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 依赖注入(Dependency Injection DI)"><!--[--><!--]--> 2. 依赖注入(Dependency Injection DI) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第八章、spring工厂创建复杂对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="第八章、Spring工厂创建复杂对象"><!--[--><!--]--> 第八章、Spring工厂创建复杂对象 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-什么是复杂对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 什么是复杂对象"><!--[--><!--]--> 1. 什么是复杂对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-spring-工厂创建复杂对象的3种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. Spring 工厂创建复杂对象的3种方式"><!--[--><!--]--> 2. Spring 工厂创建复杂对象的3种方式 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第九章、控制spring工厂创建对象的次数" class="router-link-active router-link-exact-active sidebar-item" aria-label="第九章、控制Spring工厂创建对象的次数"><!--[--><!--]--> 第九章、控制Spring工厂创建对象的次数 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-如何控制简单对象创建的次数" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 如何控制简单对象创建的次数"><!--[--><!--]--> 1. 如何控制简单对象创建的次数 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-什么是对象的生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 什么是对象的生命周期"><!--[--><!--]--> 1. 什么是对象的生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-为什么要学习对象的生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 为什么要学习对象的生命周期"><!--[--><!--]--> 2. 为什么要学习对象的生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-生命周期的三个阶段" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 生命周期的三个阶段"><!--[--><!--]--> 3. 生命周期的三个阶段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第十一章、配置文件参数化" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十一章、配置文件参数化"><!--[--><!--]--> 第十一章、配置文件参数化 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-配置文件参数的开发步骤" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 配置文件参数的开发步骤"><!--[--><!--]--> 1. 配置文件参数的开发步骤 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第十二章、自定义类型转换器" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十二章、自定义类型转换器"><!--[--><!--]--> 第十二章、自定义类型转换器 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-类型转换器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 类型转换器"><!--[--><!--]--> 1. 类型转换器 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-细节" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 细节"><!--[--><!--]--> 3. 细节 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第十三章、后置处理bean" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十三章、后置处理Bean"><!--[--><!--]--> 第十三章、后置处理Bean <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第一章、静态代理设计模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="第一章、静态代理设计模式"><!--[--><!--]--> 第一章、静态代理设计模式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-为什么需要代理设计模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 为什么需要代理设计模式"><!--[--><!--]--> 1. 为什么需要代理设计模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-代理设计模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 代理设计模式"><!--[--><!--]--> 2. 代理设计模式 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第二章、spring的动态代理开发" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二章、Spring的动态代理开发"><!--[--><!--]--> 第二章、Spring的动态代理开发 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-spring动态代理的概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Spring动态代理的概念"><!--[--><!--]--> 1. Spring动态代理的概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-搭建开发环境" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 搭建开发环境"><!--[--><!--]--> 2. 搭建开发环境 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_3-spring动态代理的开发步骤" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Spring动态代理的开发步骤"><!--[--><!--]--> 3. Spring动态代理的开发步骤 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_4-动态代理细节分析" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 动态代理细节分析"><!--[--><!--]--> 4. 动态代理细节分析 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#第三章、动态代理详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="第三章、动态代理详解"><!--[--><!--]--> 第三章、动态代理详解 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_1-额外功能的详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.  额外功能的详解"><!--[--><!--]--> 1.  额外功能的详解 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-vuepress/java/Spring.html#_2-切入点详解" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 切入点详解"><!--[--><!--]--> 2. 切入点详解 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="spring-5" tabindex="-1"><a class="header-anchor" href="#spring-5" aria-hidden="true">#</a> Spring 5</h1><h1 id="勿在浮沙筑高台-每天进步一丁点儿" tabindex="-1"><a class="header-anchor" href="#勿在浮沙筑高台-每天进步一丁点儿" aria-hidden="true">#</a> 勿在浮沙筑高台，每天进步一丁点儿！</h1><p>[TOC]</p><h2 id="第一章-引言" tabindex="-1"><a class="header-anchor" href="#第一章-引言" aria-hidden="true">#</a> 第一章 引言</h2><h3 id="_1-ejb存在的问题" tabindex="-1"><a class="header-anchor" href="#_1-ejb存在的问题" aria-hidden="true">#</a> 1. EJB存在的问题</h3><blockquote><p><strong>EJB(Enterprise Java Bean)</strong></p><ol><li><p>运行环境苛刻</p></li><li><p>代码移植性差</p></li></ol><p>总结： EJB重量级的框架</p></blockquote><h3 id="_2-什么是-spring" tabindex="-1"><a class="header-anchor" href="#_2-什么是-spring" aria-hidden="true">#</a> 2. 什么是 Spring</h3><blockquote><p>1.Spring是一个轻量级的JavaEE解决方案，整合众多优秀的设计模式</p></blockquote><ul><li><p>轻量级</p><blockquote><ol><li>对于运行环境没有额外要求 开源 tomcat resion jetty 收费 weblogic websphere</li><li>代码移植性高 不需要实现额外接口</li></ol></blockquote></li><li><p>JavaEE的解决方案</p></li><li><p>整合设计模式</p></li></ul><blockquote><ol><li>工厂</li><li>代理</li><li>模板</li><li>策略</li></ol></blockquote><h3 id="_3-设计模式" tabindex="-1"><a class="header-anchor" href="#_3-设计模式" aria-hidden="true">#</a> 3. 设计模式</h3><blockquote><ol><li>广义概念 面向对象中，解决特定问题的经典代码</li><li>狭义概念 GOF4人帮定义的23种设计模式：工厂、适配器、装饰器、门面、代理、模板...</li></ol></blockquote><h3 id="_4-工厂设计模式" tabindex="-1"><a class="header-anchor" href="#_4-工厂设计模式" aria-hidden="true">#</a> 4. 工厂设计模式</h3><h4 id="_4-1-什么是工厂设计模式" tabindex="-1"><a class="header-anchor" href="#_4-1-什么是工厂设计模式" aria-hidden="true">#</a> 4.1 什么是工厂设计模式</h4><blockquote><ol><li><p>概念： 通过工厂类、创建对象</p><p>​ User user = new User();</p><p>​ UserDao userDao = new UserDaoUmpl();</p></li><li><p>好处： 解耦合</p><p>​ 耦合： 指的是代码间的强关联，一方的改变会影响到另一方</p><p>​ 问题： 不利于代码维护</p><p>​ 简单： 把接口的实现类，硬编码在程序中</p><p>​ UserService userServeic = new UserServiceImpl();</p></li></ol></blockquote><h4 id="_4-2-简单工厂的设计模式" tabindex="-1"><a class="header-anchor" href="#_4-2-简单工厂的设计模式" aria-hidden="true">#</a> 4.2 简单工厂的设计模式</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>dsapr<span class="token punctuation">.</span>basic</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationTargetException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span>: chenyi.Wangwangwang
 * <span class="token keyword">@date</span>: 2021/10/11 19:19
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Properties</span> env <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 第一步 获得IO输入流</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">BeanFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;/applicationContext.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 第二步 文件内容 封装 Properties 集合中 key = userService value = com.dsapr.UserServiceImpl</span>
            env<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

            inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        对象的创建方式：
            1. 直接调用构造方法 创建对象 UserService userService = new UserServiceImpl();
            2. 通过反射的形式 创建对象
                Class clazz = Class.formName(&quot;com.dsapr.basic.UserServiceImpl&quot;);
                UserService userService = (UserService)class.newInstance();
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">UserService</span> <span class="token function">getUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
<span class="token comment">//            Class clazz = Class.forName(&quot;com.dsapr.basic.UserServiceImpl&quot;);</span>
            <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">NoSuchMethodException</span> <span class="token operator">|</span> <span class="token class-name">InstantiationException</span> <span class="token operator">|</span> <span class="token class-name">IllegalAccessException</span> <span class="token operator">|</span> <span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> userService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">UserDao</span> <span class="token function">getUserDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
<span class="token comment">//            Class clazz = Class.forName(&quot;org.dsapr.basic.UserDaoImpl&quot;);</span>
            <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;userDao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userDao <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">NoSuchMethodException</span> <span class="token operator">|</span> <span class="token class-name">InstantiationException</span> <span class="token operator">|</span> <span class="token class-name">IllegalAccessException</span> <span class="token operator">|</span> <span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="_4-3-通用工厂的设计" tabindex="-1"><a class="header-anchor" href="#_4-3-通用工厂的设计" aria-hidden="true">#</a> 4.3 通用工厂的设计</h4><ul><li><p>问题</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>简单工厂会存在大量的代码冗余
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>通用工厂的代码</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>创建一切想要的对象
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ret <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">NoSuchMethodException</span> <span class="token operator">|</span> <span class="token class-name">InstantiationException</span> <span class="token operator">|</span> <span class="token class-name">IllegalAccessException</span> <span class="token operator">|</span> <span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul><h4 id="_4-4-通用工厂的使用方式" tabindex="-1"><a class="header-anchor" href="#_4-4-通用工厂的使用方式" aria-hidden="true">#</a> 4.4 通用工厂的使用方式</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span> 定义类型 <span class="token punctuation">(</span>类<span class="token punctuation">)</span>
<span class="token number">2.</span> 通过配置文件的配置告知工厂<span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span>properties<span class="token punctuation">)</span>
   key <span class="token operator">=</span> value
<span class="token number">3.</span> 通过工厂获得类的对象
   <span class="token class-name">Object</span> ret <span class="token operator">=</span> <span class="token class-name">BeanFactory</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-总结" tabindex="-1"><a class="header-anchor" href="#_5-总结" aria-hidden="true">#</a> 5. 总结</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Spring</span> 本质：工厂 <span class="token class-name">ApplicationContext</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span>xml<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="第二章、-第一个-spring-程序" tabindex="-1"><a class="header-anchor" href="#第二章、-第一个-spring-程序" aria-hidden="true">#</a> 第二章、 第一个 Spring 程序</h2><h3 id="_1-软件版本" tabindex="-1"><a class="header-anchor" href="#_1-软件版本" aria-hidden="true">#</a> 1. 软件版本</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span> JDK1<span class="token punctuation">.</span><span class="token number">8</span><span class="token operator">+</span>
<span class="token number">2.</span> <span class="token class-name">Maven3</span><span class="token number">.5</span><span class="token operator">+</span>
<span class="token number">3.</span> IDEA2018<span class="token operator">+</span>
<span class="token number">4.</span> <span class="token class-name">SpringFramework</span> <span class="token number">5.1</span><span class="token number">.4</span>
   官方网站 www<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>io
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-环境搭建" tabindex="-1"><a class="header-anchor" href="#_2-环境搭建" aria-hidden="true">#</a> 2. 环境搭建</h3><ul><li><p>Spring的jar包</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code># 设置依赖
<span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>Spring的配置文件</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 配置文件的放置位置
<span class="token list punctuation">2.</span> 配置文件的命名：没有硬性要求 建议：applicationContext.xml

思考：日后应用Spring框架时，需要进行配置文件路径的设置。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h3 id="_3-spring-的核心-api" tabindex="-1"><a class="header-anchor" href="#_3-spring-的核心-api" aria-hidden="true">#</a> 3. Spring 的核心 API</h3><ul><li><p>ApplicationContext</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>作用：Spring 提供的 ApplicationContext 这个工厂，用于对象的创建
好处：解耦合
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>ApplicationContext 接口类型</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>接口：屏蔽实现的差异
非web环境：ClassPathXmlApplicationContext(main junit)
web环境：XmlWebApplicationContext
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li><li><p>重量级资源</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>ApplicationContext工厂的对象占用大量内存。
不会频繁的创建对象，一个应用只会创建一个工厂对象。
ApplicationContext工厂：一定是线程安全的（多线程并发访问）
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h3 id="_4-程序开发" tabindex="-1"><a class="header-anchor" href="#_4-程序开发" aria-hidden="true">#</a> 4. 程序开发</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span>  创建类型
<span class="token list punctuation">2.</span>  配置文件的配置 applicationContext.xml
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.basic.Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token list punctuation">3.</span>  通过工厂类，获得对象
    ApplicationContext
   	        |- ClassPathXmlApplicationContext
   	ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;/applicationContext.xml&quot;);
   	Person person = (Person) ctx.getBean(&quot;person&quot;);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_5-细节分析" tabindex="-1"><a class="header-anchor" href="#_5-细节分析" aria-hidden="true">#</a> 5. 细节分析</h3><ul><li><p>名词解释</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring 工厂创建的对象，叫做bean或者组件(componet)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>Spring工厂的相关的方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Spring 配置文件中 只能有一个 &lt;bean class 是 Person 类型</span>
<span class="token class-name">Person</span> person <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;person = &quot;</span> <span class="token operator">+</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取的是 Spring 工厂配置文件中所有 bean 标签的 id 值</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanDefinitionName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;beanDefinitionName = &quot;</span> <span class="token operator">+</span> beanDefinitionName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 根据类型获得Spring配置文件中对应的id值</span>
ctx<span class="token punctuation">.</span><span class="token function">getBeanNamesForType</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 判断是否存在指定id值的bean</span>
ctx<span class="token punctuation">.</span><span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 判断是否存在指定id值的bean</span>
ctx<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li><li><p>配置文件中需要注意的细节</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 只配置class属性
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.basic.Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
a) 上述这种配置 有没有id值 org.dsapr.basic.Person#0
b) 应用场景: 如果这个bean只需要使用一次，那么就可以省略id值
			如果这个bean会使用多次，或者被其他bean引用则需要设置id值
			
<span class="token list punctuation">2.</span> name属性
作用: 用于在Spring的配置文件中，为bean对象定义别名(小名)
相同: 
   <span class="token list punctuation">1.</span> ctx.getBean(&quot;id|name&quot;)--&gt;object
   <span class="token list punctuation">2.</span> &lt;bean id=&quot;&quot; class=&quot;&quot;
		等效
	  &lt;bean name=&quot;&quot; class=&quot;&quot;
区别: 
   <span class="token list punctuation">1.</span> 别名可以定义多个，但是id属性只能有一个值
   <span class="token list punctuation">2.</span> XML的id属性的值，命名要求：必须以字母开头，字母 数字 下滑线 连字符 不能以特殊字符开头 /person
   		name属性的值，命名没有要求 /person
   	name属性会应用在特殊命名的场景下: /person (spring+struts1)
   	
   	XML发展到了今天: ID属性的限制，不存在 /person
   <span class="token list punctuation">3.</span> 代码
        // 判断是否存在指定id值的bean 不能判断name
        ctx.containsBeanDefinition(&quot;&quot;);
        // 判断是否存在指定id值的bean 也能判断name
        ctx.containsBean(&quot;&quot;);
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></li></ul><h3 id="_6-spring工厂的底层实现原理-简易版" tabindex="-1"><a class="header-anchor" href="#_6-spring工厂的底层实现原理-简易版" aria-hidden="true">#</a> 6. Spring工厂的底层实现原理(简易版)</h3><p><strong>Spring 工厂是可以调用对象私有的构造方法创建对象</strong></p><ol><li><p>通过 ClassPathXmlApplicationContext 工厂读取配置文件 applicationContext.xml</p></li><li><p>获得 bean 标签的相关信息 id 和 class 的值，通过反射创建对象</p><p>Class&lt;?&gt; clazz = Class.forName(class的值);</p><p>id 的值 = clazz.getDeclaredConstructor().newInstance();</p></li><li><p>反射创建对象底层也是会调用对象自己的构造方法</p><p>Class&lt;?&gt; clazz = Class.forName(class的值);</p><p>id 的值 = clazz.getDeclaredConstructor().newInstance();</p><p>等效于 Account account = new Account();</p></li></ol><h3 id="_7-思考" tabindex="-1"><a class="header-anchor" href="#_7-思考" aria-hidden="true">#</a> 7. 思考</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>问题：未来在开发过程中，是不是所有的对象都会交给 Spring 工厂来创建？
回答：理论上 是的，但是有特别：实体对象(entity)是不会交给 Spring 创建。它是由持久层框架进行创建。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="第三章、spring5-x与日志文件的整合" tabindex="-1"><a class="header-anchor" href="#第三章、spring5-x与日志文件的整合" aria-hidden="true">#</a> 第三章、Spring5.x与日志文件的整合</h1><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring 与日志框架进行整合，日志框架就可以在控制台中，输出 Spring 框架运行过程中的一些重要信息。
好处：便于了解 Spring 框架的运行过程，利于程序的测试。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>Spring 如何整合日志框架</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>默认
  Spring1.2.3早期都是于commons-logging.jar
  Spring5.x默认整合的日志框架 logback log4j2
 
Spring5.x整合log4j
  <span class="token list punctuation">1.</span> 引入log4j jar 包
  <span class="token list punctuation">2.</span> 引入log4.properities配置文件
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><p>pom</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>log4j.properties</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># resource文件目录下</span>
<span class="token comment">### 配置根</span>
<span class="token attr-name">log4j.rootLogger</span> <span class="token punctuation">=</span> <span class="token attr-value">debug,console</span>

<span class="token comment">### 输出显示到控制台 ###</span>
<span class="token attr-name">log4j.appender.console</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token attr-name">log4j.appender.console.Target</span> <span class="token punctuation">=</span> <span class="token attr-value">System.out</span>
<span class="token attr-name">log4j.appender.console.layout</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.PatternLayout</span>
<span class="token attr-name">log4j.appender.console.layout.ConversionPattern</span> <span class="token punctuation">=</span> <span class="token attr-value">[%-5p] %d{yyyy-MM-dd HH:mm:ss,SSS} method:%l%n%m%n</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul></li></ul><h1 id="第四章、注入-injection" tabindex="-1"><a class="header-anchor" href="#第四章、注入-injection" aria-hidden="true">#</a> 第四章、注入(Injection)</h1><h2 id="_1-什么是注入" tabindex="-1"><a class="header-anchor" href="#_1-什么是注入" aria-hidden="true">#</a> 1. 什么是注入</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>通过Spring工厂及配置文件，为所创建对象的成员变量赋值
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_1-1-为什么需要注入" tabindex="-1"><a class="header-anchor" href="#_1-1-为什么需要注入" aria-hidden="true">#</a> 1.1 为什么需要注入</h4><p><strong>通过编码的方式为成员变量进行赋值存在耦合</strong></p><h4 id="_1-2-如何进行注入-开发步骤" tabindex="-1"><a class="header-anchor" href="#_1-2-如何进行注入-开发步骤" aria-hidden="true">#</a> 1.2 如何进行注入[开发步骤]</h4><ul><li><p>类为成员变量提供 set get 方法</p></li><li><p>配置 spring 的配置文件</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p,p1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.basic.Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>chenyi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h4 id="_1-3-注入好处" tabindex="-1"><a class="header-anchor" href="#_1-3-注入好处" aria-hidden="true">#</a> 1.3 注入好处</h4><p>​ <strong>解耦合</strong></p><h3 id="_2-spring注入的原理分析-简易版" tabindex="-1"><a class="header-anchor" href="#_2-spring注入的原理分析-简易版" aria-hidden="true">#</a> 2. Spring注入的原理分析(简易版)</h3><h2 id="第五章、set注入详解" tabindex="-1"><a class="header-anchor" href="#第五章、set注入详解" aria-hidden="true">#</a> 第五章、set注入详解</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>针对于不同类型的成员变量，在<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>标签，需要嵌套其它标签
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p><strong>Set注入</strong>类型分类</p><ul><li><p>JDK内置类型</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token comment">// 字符串类型</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span> <span class="token comment">// 8种基本类型</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> emails<span class="token punctuation">;</span> <span class="token comment">// 数组类型</span>
    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> tels<span class="token punctuation">;</span> <span class="token comment">// set集合</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> address<span class="token punctuation">;</span> <span class="token comment">// list集合</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> qqs<span class="token punctuation">;</span> <span class="token comment">// Map集合</span>
    <span class="token keyword">private</span> <span class="token class-name">Properties</span> p<span class="token punctuation">;</span> <span class="token comment">// properites集合</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>用户自定义类型</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">UserDao</span> <span class="token function">getUserDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul></li></ul><h3 id="_1-jdk内置类型" tabindex="-1"><a class="header-anchor" href="#_1-jdk内置类型" aria-hidden="true">#</a> 1. JDK内置类型</h3><h4 id="_1-1-string-8种基本类型" tabindex="-1"><a class="header-anchor" href="#_1-1-string-8种基本类型" aria-hidden="true">#</a> 1.1 String+8种基本类型</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_1-2-数组" tabindex="-1"><a class="header-anchor" href="#_1-2-数组" aria-hidden="true">#</a> 1.2 数组</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>dsapr@abc.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>chenyi@abc.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>soap@abc.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_1-3-set集合" tabindex="-1"><a class="header-anchor" href="#_1-3-set集合" aria-hidden="true">#</a> 1.3 Set集合</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>222<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>333<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>333<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_1-4-list集合" tabindex="-1"><a class="header-anchor" href="#_1-4-list集合" aria-hidden="true">#</a> 1.4 List集合</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>chengdu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>shanghai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>shannxi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>shannxi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_1-5-map集合" tabindex="-1"><a class="header-anchor" href="#_1-5-map集合" aria-hidden="true">#</a> 1.5 Map集合</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>注意：map -- entry -- key有特定的标签 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
					值根据对应累心供选择对应类型的标签
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>dsapr<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>123123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>dsapr<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_1-6-properites" tabindex="-1"><a class="header-anchor" href="#_1-6-properites" aria-hidden="true">#</a> 1.6 Properites</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Properties类型 特殊的Map key=String value=String
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_1-7-复杂的jdk类型-date" tabindex="-1"><a class="header-anchor" href="#_1-7-复杂的jdk类型-date" aria-hidden="true">#</a> 1.7 复杂的JDK类型(Date)</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>需要程序员自定义类型转换器，处理。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-用户自定义类型" tabindex="-1"><a class="header-anchor" href="#_2-用户自定义类型" aria-hidden="true">#</a> 2. 用户自定义类型</h2><h3 id="_2-1-第一种方式" tabindex="-1"><a class="header-anchor" href="#_2-1-第一种方式" aria-hidden="true">#</a> 2.1 第一种方式</h3><ul><li><p>为成员变量提供set get方法</p></li><li><p>配置文件中进行注入(赋值)</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.basic.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.basic.UserDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h3 id="_2-2-第二种方式" tabindex="-1"><a class="header-anchor" href="#_2-2-第二种方式" aria-hidden="true">#</a> 2.2 第二种方式</h3><ul><li><p>第一种赋值方式存在的问题</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 配置文件代码冗余
<span class="token list punctuation">2.</span> 被注入的对象(UserDao)，多次创建，浪费(JVM)内存资源
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>为成员变量提供 set get 方法</p></li><li><p>配置文件中进行配置</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.dsapr.basic.UserDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.dsapr.basic.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

#Spring4.x 废除 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">local</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 基本等效 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul><h2 id="_3-set-注入的简化写法" tabindex="-1"><a class="header-anchor" href="#_3-set-注入的简化写法" aria-hidden="true">#</a> 3. Set 注入的简化写法</h2><h3 id="_3-1-基于属性简化" tabindex="-1"><a class="header-anchor" href="#_3-1-基于属性简化" aria-hidden="true">#</a> 3.1 基于属性简化</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>JDK类型注入
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dsapr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>dsapr<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dsapr<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
注意：value属性 只能简化 8种基本类型和String类型 注入标签

用户自定义类型
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.userService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_3-2-基于命名空间-p-进行简化" tabindex="-1"><a class="header-anchor" href="#_3-2-基于命名空间-p-进行简化" aria-hidden="true">#</a> 3.2 基于命名空间 p 进行简化</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>JDK类型注入
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dsapr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>dsapr<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dsapr<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
注意：value属性 只能简化 8种基本类型和String类型 注入标签

用户自定义类型
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.userService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.basic.Person<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dsapr<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="第六章、构造注入" tabindex="-1"><a class="header-anchor" href="#第六章、构造注入" aria-hidden="true">#</a> 第六章、构造注入</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>注入：通过Spring的配置文件，为成员变量赋值
Set注入：Spring调用Set方法 通过配置文件 为成员变量赋值
构造注入：Spring调用构造方法 通过配置文件 为成员变量赋值
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_1-开发步骤" tabindex="-1"><a class="header-anchor" href="#_1-开发步骤" aria-hidden="true">#</a> 1. 开发步骤</h3><ul><li><p>提供有参构造方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>Spring 的配置文件</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>customer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.basic.constructer.Customer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>soap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h3 id="_2-构造方法重载" tabindex="-1"><a class="header-anchor" href="#_2-构造方法重载" aria-hidden="true">#</a> 2. 构造方法重载</h3><h4 id="_2-1-参数个数不同时" tabindex="-1"><a class="header-anchor" href="#_2-1-参数个数不同时" aria-hidden="true">#</a> 2.1 参数个数不同时</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>通过控制<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructer-arg</span><span class="token punctuation">&gt;</span></span>标签的数量进行区分
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_2-1-构造参数个数相同时" tabindex="-1"><a class="header-anchor" href="#_2-1-构造参数个数相同时" aria-hidden="true">#</a> 2.1 构造参数个数相同时</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>通过在标签引入 type 属性 进行类型的区分 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructer-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-注入的总结" tabindex="-1"><a class="header-anchor" href="#_3-注入的总结" aria-hidden="true">#</a> 3. 注入的总结</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>set注入 构造注入
未来的实战中，应用 set 注入还是构造注入？
答案：set 注入更多
		<span class="token list punctuation">1.</span> 构造注入麻烦（重载）
		<span class="token list punctuation">2.</span> Spring框架底层 大量应用了 set 注入
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/blog-vuepress/assets/Spring注入.e60fca3c.png" alt="Spring注入"></p><h2 id="第七章、反转控制-与-依赖注入" tabindex="-1"><a class="header-anchor" href="#第七章、反转控制-与-依赖注入" aria-hidden="true">#</a> 第七章、反转控制 与 依赖注入</h2><h3 id="_1-反转-转移-控制-ioc-inverse-of-control" tabindex="-1"><a class="header-anchor" href="#_1-反转-转移-控制-ioc-inverse-of-control" aria-hidden="true">#</a> 1. 反转(转移)控制(IOC Inverse of Control)</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>控制：对于成员变量赋值的控制权
反转控制：把对于成员变量赋值的控制权，从代码中反转(转移)到Spring工厂和配置文件中完成
	好处：解耦合
底层实现：工厂设计模式
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/blog-vuepress/assets/反转控制.753ff8af.png" alt="反转控制"></p><h3 id="_2-依赖注入-dependency-injection-di" tabindex="-1"><a class="header-anchor" href="#_2-依赖注入-dependency-injection-di" aria-hidden="true">#</a> 2. 依赖注入(Dependency Injection DI)</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>注入：通过 Spring 的工厂及配置文件，为对象 (bean，组件) 的成员变量赋值

依赖注入：当一个类需要另一个类时，就意味着依赖，一旦出现依赖，就可以把另一个类作为本类的成员变量，最终通过 Spring 配置文件进行注入(赋值)。
	好处：解耦合
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/blog-vuepress/assets/依赖注入.2117e734.png" alt="依赖注入"></p><h2 id="第八章、spring工厂创建复杂对象" tabindex="-1"><a class="header-anchor" href="#第八章、spring工厂创建复杂对象" aria-hidden="true">#</a> 第八章、Spring工厂创建复杂对象</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>简单对象目前指的是pojo，为了跟ejb的javabean作区分，即可以直接new的对象。复杂对象主要是抽象类、接口等不能直接创建
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/blog-vuepress/assets/复杂对象.990fd2bd.png" alt="复杂对象"></p><h3 id="_1-什么是复杂对象" tabindex="-1"><a class="header-anchor" href="#_1-什么是复杂对象" aria-hidden="true">#</a> 1. 什么是复杂对象</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>复杂对象：指的就是不能直接通过new构造方法创建的对象
	Connection
	SqlSessionFactory
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-spring-工厂创建复杂对象的3种方式" tabindex="-1"><a class="header-anchor" href="#_2-spring-工厂创建复杂对象的3种方式" aria-hidden="true">#</a> 2. Spring 工厂创建复杂对象的3种方式</h3><h4 id="_2-1-factorybean接口" tabindex="-1"><a class="header-anchor" href="#_2-1-factorybean接口" aria-hidden="true">#</a> 2.1 FactoryBean接口</h4><ul><li><p>开发步骤</p><ul><li><p>实现 FactoryBean 接口</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFactoryBean</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// 用于书写创建复杂对象的代码，并把复杂对象作为方法的返回值返回</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/test_db?userSSL=false&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 返回 所创建复杂对象的Class对象</span>
        <span class="token keyword">return</span> <span class="token class-name">Connection</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 需要创建一次还是每一次调用都需要创建一个新的复杂对象</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FactoryBean</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li><li><p>Spring 配置文件的配置</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 如果Class中指定的类型 是FactoryBean接口的实现类，那么通过id值获得的是这个类所创建的复杂对象 Connection</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.factorybean.ConnectionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token italic"><span class="token punctuation">*</span><span class="token content">错误认知</span><span class="token punctuation">*</span></span>：ctx.getBean(&quot;conn&quot;)获得的是ConntionFactoryBean这个类的对象;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li><li><p>细节</p><ul><li><p>如果想获得FactoryBean类型的对象 ctx.getBean(&quot;&amp;conn&quot;)</p><p>获得就是ConnectionFactoryBean对象</p></li><li><p>isSingleton方法</p><p>返回 true 只会创建一个复杂对象</p><p>返回 false 每一次都会创建新的对象</p><p>问题：根据这个对象的特定，决定是返回true (SqlSessionFactory) 还是 false (Connection)</p></li><li><p>mysql 高版本连接创建时，需要指定SSL证书，解决问题的方式</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>url = &quot;jdbc:mysql://localhost:3306/test_db?useSSL=false&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>依赖注入的体会(DI)</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>把ConnectionFactoryBean中依赖的4个字符串信息，进行配置文件的注入
好处：解耦合
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li><li><p>FactoryBean的实现原理[简易版]</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>接口回调
java谚语：接口加反射，什么都能做。
<span class="token list punctuation">1.</span> 为什么 Spring 规定 FactoryBean 接口 实现 并且 getObject()?
<span class="token list punctuation">2.</span> ctx.getBean(&quot;conn&quot;) 获得是复杂对象 Connection 而没有 获得 ConnectionFactoryBean(&amp;)

Spring 内部运行流程
<span class="token list punctuation">1.</span> 通过conn获得 ConnectionFactoryBean类的对象，进而通过 instanceof 判断出是 FactoryBean 接口的实现类
<span class="token list punctuation">2.</span> Spring 按照规定 getObject() ---&gt; Connection
<span class="token list punctuation">3.</span> 返回 Connection
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="/blog-vuepress/assets/FactoryBean工作原理.8e158e16.png" alt="FactoryBean工作原理"></p></li><li><p>FactoryBean总结</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring中用于创建复杂对象的一种方式，也是Spring原生提供的，后续讲解Spring整合其他框架，大量应用FactoryBean
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_2-2-实例工厂" tabindex="-1"><a class="header-anchor" href="#_2-2-实例工厂" aria-hidden="true">#</a> 2.2 实例工厂</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 避免Spring框架的侵入
	implements FactoryBean
<span class="token list punctuation">2.</span> 整合遗留系统
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>开发步骤</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.factorybean.ConnectionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getConnection<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h4 id="_2-3-静态工厂" tabindex="-1"><a class="header-anchor" href="#_2-3-静态工厂" aria-hidden="true">#</a> 2.3 静态工厂</h4><ul><li><p>开发步骤</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.factorybean.StaticConnectionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getConnection<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h2 id="第九章、控制spring工厂创建对象的次数" tabindex="-1"><a class="header-anchor" href="#第九章、控制spring工厂创建对象的次数" aria-hidden="true">#</a> 第九章、控制Spring工厂创建对象的次数</h2><p>FactoryBean isSingleton true false</p><h3 id="_1-如何控制简单对象创建的次数" tabindex="-1"><a class="header-anchor" href="#_1-如何控制简单对象创建的次数" aria-hidden="true">#</a> 1. 如何控制简单对象创建的次数</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>singleton|prototype<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.scope.Account<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
singleton: 只会创建一次简单对象 默认值
prototytpe: 每一次都会创建新的对象
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-如何控制复杂对象的创建次数" tabindex="-1"><a class="header-anchor" href="#_2-如何控制复杂对象的创建次数" aria-hidden="true">#</a> 2. 如何控制复杂对象的创建次数</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>FactoryBean{
	isSigingleton(){
		retrun true; 只会创建一次
		return false; 每一次都会创建新的
	}
}
如果没有 isSingleton 方法 还是通过 scope 属性 进行队形创建次数的控制
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-为什么要控制对象的创建次数" tabindex="-1"><a class="header-anchor" href="#_3-为什么要控制对象的创建次数" aria-hidden="true">#</a> 3. 为什么要控制对象的创建次数？</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>好处: 节省不必要的内存浪费
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>什么样的对象只创建一次</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> SqlSessionFactory
<span class="token list punctuation">2.</span> DAO
<span class="token list punctuation">3.</span> Service
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>什么样的对象 每一次都要创建新的</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> Connection
<span class="token list punctuation">2.</span> SqlSession | Session
<span class="token list punctuation">3.</span> Struts2 Action
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><hr><h1 id="工厂高级特性" tabindex="-1"><a class="header-anchor" href="#工厂高级特性" aria-hidden="true">#</a> 工厂高级特性</h1><h1 id="第十章、对象的生命周期" tabindex="-1"><a class="header-anchor" href="#第十章、对象的生命周期" aria-hidden="true">#</a> 第十章、对象的生命周期</h1><p><img src="/blog-vuepress/assets/Spring生命周期.9c640bd9.png" alt="Spring生命周期"></p><h2 id="_1-什么是对象的生命周期" tabindex="-1"><a class="header-anchor" href="#_1-什么是对象的生命周期" aria-hidden="true">#</a> 1. 什么是对象的生命周期</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>指的是一个对象创建、存活、消亡的一个完整过程
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-为什么要学习对象的生命周期" tabindex="-1"><a class="header-anchor" href="#_2-为什么要学习对象的生命周期" aria-hidden="true">#</a> 2. 为什么要学习对象的生命周期</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>User user = new User()
JVM
由Spring负责对象的创建、存活、销毁、了解生命周期，有利于我们使用好Spring为我们创建的对象
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-生命周期的三个阶段" tabindex="-1"><a class="header-anchor" href="#_3-生命周期的三个阶段" aria-hidden="true">#</a> 3. 生命周期的三个阶段</h2><ul><li><p>创建阶段</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Srping工厂何时创建对象
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>scope=&quot;singleton&quot;</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring工厂创建的同时,完成对象的创建

注意: 设置 scope=singleton 这种情况下 也需要在获取对象的同时, 创建对象
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">lazy-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>scope=&quot;prototype&quot;</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring工厂会在获取对象的同时,创建对象
ctx.getBean(&quot;&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li><li><p>初始化阶段</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring 工厂在创建完成对象后，调用对象的初始化方法，完成对应的初始化操作

<span class="token list punctuation">1.</span> 初始化方法提供: 程序员根据需求，提供初始化方法，最终完成初始化操作
<span class="token list punctuation">2.</span> 初始化方法调用: Spring 工厂进行调用
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>InitializingBean接口</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 程序员根据需求实现的方法 完成初始化操作</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterProperitesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>对象中提供一个普通的方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;product&quot;</span> init<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">&quot;myInit&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;org.dsapr.life.Product&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>细节分析</p><ol><li><p>如果一个对象既实现了InitializingBean 同时又提供 普通的初始化方法</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> InitializingBean
<span class="token list punctuation">2.</span> 初始化
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>注入一定发生在初始化操作的前面</p></li><li><p>什么叫做初始化操作</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>资源的初始化: 数据库 IO 网络 ......(耗时且侵占系统资源的操作)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol></li></ul></li><li><p>销毁阶段</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring 销毁对象前, 会调用对象的销毁方法, 完成销毁操作

<span class="token list punctuation">1.</span> Spring 什么时候销毁所创建的对象?
	ctx.close();
<span class="token list punctuation">2.</span> 销毁方法: 程序员根据自己的需求, 定义销毁方法, 完成销毁操作
		调用: Spring 工厂完成调用
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>DisposableBean</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>定义一个普通的销毁方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;product&quot;</span> destroy<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">&quot;myDestroy&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;org.dsapr.life.Product&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>细节分析</p><ol><li><p>销毁方法的操作只适用于 scope=&quot;singleton&quot;</p></li><li><p>什么叫做销毁操作</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>主要指的就是 资源的释放操作 io.close() connection.close()
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol></li></ul></li></ul><h2 id="第十一章、配置文件参数化" tabindex="-1"><a class="header-anchor" href="#第十一章、配置文件参数化" aria-hidden="true">#</a> 第十一章、配置文件参数化</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>把Spring配置文件中需要经常修改的字符串信息，转移到一个更小的配置文件中

<span class="token list punctuation">1.</span> Spring配置文件中存在经常需要修改的字符串吗
	存在 以数据库连接相关的参数 代表
<span class="token list punctuation">2.</span> 经常变化的字符串在Spring的配置文件中直接修改
	不利于项目的维护(修改)
<span class="token list punctuation">3.</span> 转移到一个小的配置文件(.properties)
	利于维护(修改)
	
配置文件参数化：利于Spring配置文件的维护(修改)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_1-配置文件参数的开发步骤" tabindex="-1"><a class="header-anchor" href="#_1-配置文件参数的开发步骤" aria-hidden="true">#</a> 1. 配置文件参数的开发步骤</h3><ul><li><p>提供一个小的配置文件(.properties)</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code>名字：随便
放置位置：随便

<span class="token attr-name">jdbc.driverClassName</span> <span class="token punctuation">=</span> <span class="token attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token attr-name">jdbc.url</span> <span class="token punctuation">=</span> <span class="token attr-value">jdbc:mysql://localhost:3306/suns?useSSL=false</span>
<span class="token attr-name">jdbc.username</span> <span class="token punctuation">=</span> <span class="token attr-value">root</span>
<span class="token attr-name">jdbc.password</span> <span class="token punctuation">=</span> <span class="token attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>Spring的配置文件与小配置文件整合</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>applicationContext.xml
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:/db.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

classpath 编译后的target下的classes
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>在Spring配置文件中通过${key}获取小配置文件中对应的值</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.factorybean.ConnectionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><h2 id="第十二章、自定义类型转换器" tabindex="-1"><a class="header-anchor" href="#第十二章、自定义类型转换器" aria-hidden="true">#</a> 第十二章、自定义类型转换器</h2><h3 id="_1-类型转换器" tabindex="-1"><a class="header-anchor" href="#_1-类型转换器" aria-hidden="true">#</a> 1. 类型转换器</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>作用：Spring 通过类型转换器把配置文件中字符串类型的数据，转换成了对象中成员变量对应类型的数据，进而完成了注入。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/blog-vuepress/assets/类型转换器.4350a500.png" alt="类型转换器"></p><h4 id="_2-自定义类型转换器" tabindex="-1"><a class="header-anchor" href="#_2-自定义类型转换器" aria-hidden="true">#</a> 2. 自定义类型转换器</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>原因：当 Spring 内部没有提供特定类型转换器时，而程序员在应用过程中还需要使用，那么就需要程序员自己定义类型转换器
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>类 implement Converter</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * convert 方法作用：String ---&gt; Date
 *          SimpleDateFormat sdf = new SimpleDateFormat();
 *          sdf.parse(String) ---&gt; Date
 * param:source 代表的是配置文件中 日期字符串 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2021-11-29<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">/&gt;</span></span>
 *
 * return: 当把转换好的Date作为convert方法的返回值后，Spring自动的为birthday属性进行注入（赋值）
 */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        date <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li><li><p>在Spring的配置文件中进行配置</p><ul><li><p>MyDateConverter对象创建出来</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDateConverter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.MyDateConverter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>类型转换器的注册</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>目的：告知Spring框架，我们所创建的MyDateConverter是一个类型转换器
<span class="token comment">&lt;!-- 用于注册类型转换器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conversionService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.context.support.ConversionServiceFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>converters<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDateConverter<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.converter.Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li></ul><h2 id="_3-细节" tabindex="-1"><a class="header-anchor" href="#_3-细节" aria-hidden="true">#</a> 3. 细节</h2><ul><li><p>MyDateConverter中的日期的格式，通过依赖注入的方式，由配置文件完成</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyDateConverter</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> pattern<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> pattern<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPattern</span><span class="token punctuation">(</span><span class="token class-name">String</span> pattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pattern <span class="token operator">=</span> pattern<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * convert 方法作用：String ---&gt; Date
     *          SimpleDateFormat sdf = new SimpleDateFormat();
     *          sdf.parse(String) ---&gt; Date
     * param:source 代表的是配置文件中 日期字符串 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2021-11-29<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">/&gt;</span></span>
     *
     * return: 当把转换好的Date作为convert方法的返回值后，Spring自动的为birthday属性进行注入（赋值）
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            date <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- Spring 创建 MyDateConverter 类型对象 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDateConverter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.converter.MyDateConverter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pattern<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy-MM-dd<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>converServiceFactoryBean 定义 id属性 值必须 converService</p></li><li><p>Spring框架内置日期类型的转换器</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>日期格式：2020/05/01 (不支持 2020-05-01)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h2 id="第十三章、后置处理bean" tabindex="-1"><a class="header-anchor" href="#第十三章、后置处理bean" aria-hidden="true">#</a> 第十三章、后置处理Bean</h2><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>BeanPostProcessor作用：对Spring工厂所创建的对象，进行再加工

AOP底层实现：

注意：BeanPostProcessor接口
	xxx() {
		
<span class="token code keyword">	}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>后置处理 Bean 的运行原理分析</li></ul><p><img src="/blog-vuepress/assets/后置处理Bean.7f2d3239.png" alt="后置处理Bean"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>程序员实现BeanPostProcessor规定接口中的方法

Object postProcessBeforeInitialization(Object bean, String beanName)
作用：Spring创建完对象，并进行注入后，可以运行Before方法进行加工
获得Spring创建好的对象：通过方法的参数
最终通过返回值交给Spring框架

Object postProcessAfterInitialization(Object bean, String beanName)
作用：执行完对象的初始化操作后，可以运行After方法进行加工
获得Spring创建好的对象：通过方法的参数
最终通过返回值交给Spring框架

实战中：
很少处理Spring的初始化操作，没有必要区分Before After。只需要实现其中的一个After方法即可
注意：
	postProcessBeforeInitiallization
	return bean对象
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li><p>BeanPostProcessor 的开发步骤</p><ol><li><p>类实现 BeanPostProcessor 接口</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBeanPostProcessor</span> <span class="token keyword">implements</span> <span class="token class-name">BeanPostProcessor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessBeforeInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessAfterInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Category</span> category <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Category</span><span class="token punctuation">)</span> bean<span class="token punctuation">;</span>
        category<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;xiaowb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> category<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p>Spring 的配置文件中配置</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBeanPosttProcessor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.MyBeanPostProcessor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>BeanPostProcessor 会对 Spring 工厂中所有创建的对象进行加工</p></li></ol></li></ul><h1 id="aop编程" tabindex="-1"><a class="header-anchor" href="#aop编程" aria-hidden="true">#</a> AOP编程</h1><h2 id="第一章、静态代理设计模式" tabindex="-1"><a class="header-anchor" href="#第一章、静态代理设计模式" aria-hidden="true">#</a> 第一章、静态代理设计模式</h2><h3 id="_1-为什么需要代理设计模式" tabindex="-1"><a class="header-anchor" href="#_1-为什么需要代理设计模式" aria-hidden="true">#</a> 1. 为什么需要代理设计模式</h3><h4 id="_1-1-问题" tabindex="-1"><a class="header-anchor" href="#_1-1-问题" aria-hidden="true">#</a> 1.1 问题</h4><ul><li><p>在JavaEE分层开发中，哪个层次对于我们来讲最重要</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>DAO ---&gt; Service ---&gt; Controller

JavaEE分层开发中，最为重要的是Service层
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>Service 层中包含了哪些代码</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Service 层中 = 核心功能(几十行 上百行) + 额外功能(附加功能)
<span class="token list punctuation">1.</span> 核心功能
   业务运算
   DAO调用
<span class="token list punctuation">2.</span> 额外功能
   <span class="token list punctuation">1.</span> 不属于业务
   <span class="token list punctuation">2.</span> 可有可无
   <span class="token list punctuation">3.</span> 代码量很小
   
   事务、日志、性能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>额外功能书写在Service层中好不好</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Service层的调用者的角度(Controller): 需要在Service层中书写角度
						软件设计者: Service 层不需要额外功能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>现实生活中的解决方式</p><p><strong>引入一个代理(中介)类</strong></p><ol><li>额外功能</li><li>调用目标类(原始类)核心功能</li></ol></li></ul><h3 id="_2-代理设计模式" tabindex="-1"><a class="header-anchor" href="#_2-代理设计模式" aria-hidden="true">#</a> 2. 代理设计模式</h3><h4 id="_1-1-概念" tabindex="-1"><a class="header-anchor" href="#_1-1-概念" aria-hidden="true">#</a> 1.1 概念</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>通过代理类，为原始类 (目标) 增加额外的功能
好处：利于原始类 (目标) 的维护
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_1-2-名词解释" tabindex="-1"><a class="header-anchor" href="#_1-2-名词解释" aria-hidden="true">#</a> 1.2 名词解释</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 目标类 原始类
	指的是 业务类 (核心功能 --&gt; 业务运算 DAO调用)
<span class="token list punctuation">2.</span> 目标方法，原始方法
	目标类(原始类)中的方法，就是目标方法(原始方法)
<span class="token list punctuation">3.</span> 额外功能 (附加功能)
	日志、事务、性能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_1-3-代理开发的核心要素" tabindex="-1"><a class="header-anchor" href="#_1-3-代理开发的核心要素" aria-hidden="true">#</a> 1.3 代理开发的核心要素</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>代理类 = 目标类(原始类) + 额外功能 + 原始类(目标类)实现相同的接口

房东 ---&gt; public interface UserService {
			m1
			m2
}
UserServiceImpl implements UserService {
			m1 ---&gt; 业务运算 DAO调用
			m2
}
UserServiceProxy implements UserService {
			m1
			m2
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_1-4-编码" tabindex="-1"><a class="header-anchor" href="#_1-4-编码" aria-hidden="true">#</a> 1.4 编码</h4><p><strong>静态代理</strong>： 为每一个原始类 手工编写</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceProxy</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserServiceImpl</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- log ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- log ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_1-5-静态代理存在的问题" tabindex="-1"><a class="header-anchor" href="#_1-5-静态代理存在的问题" aria-hidden="true">#</a> 1.5 静态代理存在的问题</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> 静态类文件数量过多，不利于项目管理
	UserServiceImpl UserServiceProxy
	OrderServiceImpl OrderServiceProxy
<span class="token list punctuation">2.</span> 额外功能维护性差
	代理类中 额外功能修改复杂（麻烦）

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="第二章、spring的动态代理开发" tabindex="-1"><a class="header-anchor" href="#第二章、spring的动态代理开发" aria-hidden="true">#</a> 第二章、Spring的动态代理开发</h2><h3 id="_1-spring动态代理的概念" tabindex="-1"><a class="header-anchor" href="#_1-spring动态代理的概念" aria-hidden="true">#</a> 1. Spring动态代理的概念</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>概念：通过代理类为原始类(目标类)增加额外功能
好处：利于原始类(目标类)的维护
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-搭建开发环境" tabindex="-1"><a class="header-anchor" href="#_2-搭建开发环境" aria-hidden="true">#</a> 2. 搭建开发环境</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.aspectj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aspectjrt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.8.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.aspectj<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aspectjweaver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.8.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_3-spring动态代理的开发步骤" tabindex="-1"><a class="header-anchor" href="#_3-spring动态代理的开发步骤" aria-hidden="true">#</a> 3. Spring动态代理的开发步骤</h3><ol><li><p>创建原始对象(目标对象)</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserServiceImpl.register 业务运算 + DAO &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserServiceImpl.login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.proxy.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>额外功能</p><p>MethodBeforeAdvice 接口</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>额外的功能书写在接口的实现中，运行在原始方法之前实现额外功能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Before</span> <span class="token keyword">implements</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 需要把运行在原始方法执行之前运行的额外功能，书写在before方法中
     * <span class="token keyword">@param</span> <span class="token parameter">method</span> 额外功能所需要增加给的那个原始方法
     * <span class="token keyword">@param</span> <span class="token parameter">objects</span> 额外功能所增加给的那个原始方法的参数
     * <span class="token keyword">@param</span> <span class="token parameter">o</span> 额外功能所增加给的那个原始对象
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Throwable</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects<span class="token punctuation">,</span> <span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- method before advice log ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.dsapr.dynamic.Before<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>定义切入点</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>切入点：额外功能加入的位置

目的：由程序员根据自己的需要，决定额外功能加入给哪个原始方法
register
login

简单的测试：所有方法都作为切入点，都加入额外的功能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 所有的方法，都作为切入点，加入额外功能 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>组装(2,3整合)</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 所有的方法，都作为切入点，加入额外功能 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 组装：目的把切入点与额外功能进行整合 --&gt;</span>
    <span class="token comment">&lt;!-- 所有的方法，都加入 before 的额外功能 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pc<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>调用</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>目的：获得<span class="token class-name">Spring</span>工厂创建的动态代理，并进行调用
<span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;/applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
注意：
    <span class="token number">1.</span> <span class="token class-name">Spring</span>的工厂通过原始对象的id值获得的是代理对象c
    <span class="token number">2.</span> 获得代理对象后，可以通过声明接口类型进行对象的存储
<span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">)</span>ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
userService<span class="token punctuation">.</span><span class="token function">regist</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol><h3 id="_4-动态代理细节分析" tabindex="-1"><a class="header-anchor" href="#_4-动态代理细节分析" aria-hidden="true">#</a> 4. 动态代理细节分析</h3><ol><li><p>Spring 创建的动态代理类在哪里？</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Spring 框架在运行时，通过动态字节码技术，在JVM创建的，运行在JVM内部，等程序结束后，会和JVM一起消失

什么叫动态字节码技术：通过第三个动态字节码框架，在JVM中创建对应类的字节码，进而创建对象，当虚拟机结束，动态字节码跟着消失。

结论：动态代理不需要定义类文件，都是JVM运行过程中动态创建的，所以不会造成静态代理，类文件数量过多，影响项目管理的问题。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/blog-vuepress/assets/动态字节码.80989154.png" alt="动态字节码"></p><ol start="2"><li><p>动态代理编程简化代理的开发</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>在额外功能不改变的前提下，创建其他目标类 (原始类) 的代理对象时，只需要指定原始 (目标) 对象即可。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>动态代理额外功能的维护性大大增强</p></li></ol></li></ol><h2 id="第三章、动态代理详解" tabindex="-1"><a class="header-anchor" href="#第三章、动态代理详解" aria-hidden="true">#</a> 第三章、动态代理详解</h2><h3 id="_1-额外功能的详解" tabindex="-1"><a class="header-anchor" href="#_1-额外功能的详解" aria-hidden="true">#</a> 1. 额外功能的详解</h3><ul><li><p>MethodBeforeAdvice分析</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span> <span class="token class-name">MethodBeforeAdvice</span> 接口作用<span class="token operator">:</span> 额外功能运行在原始方法执行之前，进行额外的功能操作。
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Before</span> <span class="token keyword">implements</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 需要把运行在原始方法执行之前运行的额外功能，书写在before方法中
     * <span class="token keyword">@param</span> <span class="token parameter">method</span> 额外功能所需要增加给的那个原始方法
     * <span class="token keyword">@param</span> <span class="token parameter">objects</span> 额外功能所增加给的那个原始方法的参数
     * <span class="token keyword">@param</span> <span class="token parameter">o</span> 额外功能所增加给的那个原始对象
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Throwable</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects<span class="token punctuation">,</span> <span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- method before advice log ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token number">2.</span> before方法的<span class="token number">3</span>个参数在实战中，该如何使用
    before方法的参数，在实战中，会根据需要进行使用，不一定都会用到，也有可能都不用。
    <span class="token class-name">Servlet</span><span class="token punctuation">{</span>
    	<span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            request<span class="token punctuation">.</span><span class="token function">getParamter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-&gt;</span>
                
            response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">-&gt;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li><li><p>MethodInterceptor(方法拦截器)</p><p>MethodBeforeAdvice ---&gt; 原始方法执行之前</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>MethodInterceptor接口: 额外功能可以根据需要运行在原始方法执行 前、后、前后
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arround</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * invoke 方法的作用：额外功能书写在 invoke
     *                  额外功能 原始方法之前
     *                          原始方法之后
     *                          原始方法执行之前 之后
     *
     * 参数： MethodInvocation (Method): 额外功能所增加的那个原始方法
     * 返回值： Object 原始方法执行后的返回值
     * date convert(String name)
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> methodInvocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- 额外功能 ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> ret <span class="token operator">=</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>额外功能运行在原始方法执行之后</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> methodInvocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- 额外功能 ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>额外功能运行在原始方法执行之前、之后</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>什么样的额外功能 运行在原始方法执行之前，之后都要添加？
事务

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> methodInvocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- 额外功能 ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- 额外功能 ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>额外功能运行在原始方法抛出异常的时候</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> methodInvocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        ret <span class="token operator">=</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- 原始方法抛出异常，执行的额外功能 ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>MethodInterceptor影响原始方法的返回值</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>原始方法的返回值，直接作为invoke方法的返回值返回，<span class="token class-name">MethodInterceptor</span>不会影响到原始方法的返回值。

<span class="token class-name">MethodInterceptor</span>影响原始方法的返回值
<span class="token class-name">Invoke</span>方法的返回值，不要直接返回原始方法的运行结果即可
    
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> methodInvocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- log ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> ret <span class="token operator">=</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul><h3 id="_2-切入点详解" tabindex="-1"><a class="header-anchor" href="#_2-切入点详解" aria-hidden="true">#</a> 2. 切入点详解</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
execution(* *(..)) ---&gt; 匹配所有方法 a b c

1. excution() 切入点函数
2. * *(..) 切入点表达式
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-1-切入点表达式" tabindex="-1"><a class="header-anchor" href="#_2-1-切入点表达式" aria-hidden="true">#</a> 2.1 切入点表达式</h4><ol><li><p>方法切入点表达式</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token class-name">Exception</span>
  <span class="token operator">|</span>      <span class="token operator">|</span>    <span class="token operator">|</span>       <span class="token operator">|</span>                 <span class="token operator">|</span>
修饰符	  返回值 方法名  参数列表            异常
      <span class="token operator">*</span>       <span class="token operator">*</span>     <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    
<span class="token operator">*</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token operator">*</span> <span class="token operator">--</span><span class="token operator">-&gt;</span> 修饰符 返回值
<span class="token operator">*</span> <span class="token operator">--</span><span class="token operator">-&gt;</span> 方法名
<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">--</span><span class="token operator">-&gt;</span> 参数表
<span class="token punctuation">.</span><span class="token punctuation">.</span>-<span class="token operator">--</span><span class="token operator">&gt;</span> 对于参数没有要求<span class="token punctuation">(</span>参数有没有，参数有几个都行，参数是什么类型的都行<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p>定义login方法作为切入点</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">*</span> login(..)

<span class="token title important"><span class="token punctuation">#</span> 定义register作为切入点</span>
<span class="token list punctuation">*</span> register(..)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>定义login方法且login方法有两个字符串类型的参数 作为切入点</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">*</span> login(String,String)

<span class="token title important"><span class="token punctuation">#</span> 注意：非 java.lang 包中的类型，必须要写全限定名</span>
<span class="token list punctuation">*</span> register(com.dsapr.proxy.User)

<span class="token title important"><span class="token punctuation">#</span> </span>
<span class="token list punctuation">*</span> login(String, ..) --&gt; login(String),login(String,String),login(String,com.dsapr.proxy.User)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>上面所讲解的方法切入点表达式不精准</p><div class="language-dtd ext-dtd line-numbers-mode"><pre class="language-dtd"><code>|- com.dsapr
	|- a
		|- UserServiceImpl
			- User login(String name, String password)
			- boolean login(User user)
			- boolean register(User user)
		|- UserServiceImpl1
			- User login(String name, String password)
	|- b
		|- UserServiceImpl
			- login(String name, String password)
               - register(User user)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p>精准方法切入点限定</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>修饰符 返回值		包.类.方法
	<span class="token list punctuation">*</span> 			com.dsapr.proxy.UserServiceImpl(..)
	<span class="token list punctuation">*</span> 			com.dsapr.proxy.UserServiceImpl(String,String)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><ol start="2"><li><p>类切入点</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>制定特定类作为切入点(额外功能加入的位置)，自然这个类中的所有方法，都会加上对应的额外功能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>语法1</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 类中的所有方法加入了额外功能</span>
<span class="token list punctuation">*</span> com.dsapr.proxy.UserServiceImpl.*(..)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>语法2</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 忽略包</span>
<span class="token list punctuation">1.</span> 类只存在一级包 com.UserServiceImpl
<span class="token list punctuation">*</span> <span class="token italic"><span class="token punctuation">*</span><span class="token content">.UserServiceImpl.</span><span class="token punctuation">*</span></span>(..)

<span class="token list punctuation">2.</span> 类存在多级包
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *..UserServiceImpl.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li><li><p>包切入点表达式 (更具实战价值)</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>指定包作为额外功能加入的位置，自然包中的所有类及其方法中都会加入额外的功能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>语法1</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 切入点包中的所有类，必须在proxy中，不能在proxy包的子包中</span>
<span class="token list punctuation">*</span> com.dsapr.proxy.<span class="token italic"><span class="token punctuation">*</span><span class="token content">.</span><span class="token punctuation">*</span></span>(..)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>语法2</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 切入点当前包及其子包都生效</span>
<span class="token list punctuation">*</span> com.dsapr.proxy..<span class="token italic"><span class="token punctuation">*</span><span class="token content">.</span><span class="token punctuation">*</span></span>(..)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li></ol></li></ol><h4 id="_2-2-切入点函数" tabindex="-1"><a class="header-anchor" href="#_2-2-切入点函数" aria-hidden="true">#</a> 2.2 切入点函数</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>切入点函数：用于执行切入点表达式
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol><li><p>excution</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>最为重要的切入点函数，功能最全
执行 方法切入点表达式，类切入点表达式，包切入点表达式

弊端：execution执行切入点表达式，书写麻烦
	execution(<span class="token italic"><span class="token punctuation">*</span><span class="token content"> com.dsapr.proxy..</span><span class="token punctuation">*</span></span>.*(..))
	
注意：其他的切入点函数，简化的是execution书写复杂度，功能上完全一致
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>args</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>作用：主要用于函数() 参数的匹配
切入点：方法参数必须得是2个字符串类型的参数
execution(<span class="token italic"><span class="token punctuation">*</span><span class="token content"> </span><span class="token punctuation">*</span></span>(String,String))

args(String,String)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>within</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>作用：主要用于进行类、包切入点表达式的匹配

切入点： UserServiceImpl 这个类

execution(<span class="token italic"><span class="token punctuation">*</span><span class="token content"> </span><span class="token punctuation">*</span></span>..UserServiceImpl.*(..))

within(*..UserServiceImpl)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/git@github.com:dsapr/blog-vuepress.git/edit/main/java/Spring.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 785722840@qq.com">dsapr</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog-vuepress/assets/app.340c2b94.js" defer></script>
  </body>
</html>
